{% extends "base.html" %}
{% load template_filters %}
{% load crispy_forms_tags %}
{% load static %}

{% block title %}Profile{% endblock %}

{% block content %}

    <div class="ml-3 mr-3">
        <table id="example" class="table table-striped table-bordered" style="width:100%">
            <caption>Hist√≥rico de busca</caption>
            <thead>
                <tr>
                    
                    <th>Data</th>
                    <th>Tesauro de Busca</th>
                    <th>Plataformas</th>
                    <th>Resultados IFF</th>
                    <th>Resultados UERJ</th>
                </tr>
            </thead>
            <tbody>
                {% for history in user.history_set.all %}
                    <tr>
                        <td>{{ history.date }}</td>
                        <td>
                            "{{ history.original_term }}"

                            {% if history.and_terms %}
                                {% with history.and_terms|split:"," as striped_and_term %}
                                    {% for term in striped_and_term %}
                                        AND ("{{ term }}")
                                    {% endfor %}
                                {% endwith %} 
                            {% endif %}
            
                            {% if history.or_terms %}
                                {% with history.or_terms|split:"," as striped_or_term %}
                                    {% for term in striped_or_term %}
                                        OR ("{{ term }}")
                                    {% endfor %}
                                {% endwith %} 
                            {% endif %}
                        
                        </td>
                        <td>{{ history.plataformas }}</td>
                        <td>{{ history.qtde_resultados_iff }}</td> 
                        <td>{{ history.qtde_resultados_uerj }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

{% endblock %}